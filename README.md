# Taskflow API

HTTP API —Å–µ—Ä–≤–∏—Å –Ω–∞ Go –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏ (3-5 –º–∏–Ω—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è).

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

Taskflow API –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å, —É–¥–∞–ª—è—Ç—å –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö IO-bound –∑–∞–¥–∞—á. –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —á—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–µ—Ä–≤–∏—Å –ª–µ–≥–∫–∏–º –∏ –ø—Ä–æ—Å—Ç—ã–º –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á** - –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ —Ñ–æ–Ω–µ —á–µ—Ä–µ–∑ worker pool
- ‚úÖ **REST API** - –ø—Ä–æ—Å—Ç–æ–π HTTP –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏  
- ‚úÖ **In-memory —Ö—Ä–∞–Ω–µ–Ω–∏–µ** - –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ **Thread-safe –æ–ø–µ—Ä–∞—Ü–∏–∏** - –±–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –≥–æ—Ä—É—Ç–∏–Ω–∞–º–∏
- ‚úÖ **Health check** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞
- ‚úÖ **CORS –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –≥–æ—Ç–æ–≤ –¥–ª—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- ‚úÖ **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - JSON –ª–æ–≥–∏ –¥–ª—è production
- ‚úÖ **Graceful shutdown** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Go 1.24+

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/bambutcha/taskflow.git
cd taskflow

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
go mod tidy

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä
go run cmd/main.go
```

=== –ò–õ–ò c Docker ===

```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/bambutcha/taskflow.git
cd taskflow

docker-compose up -d --build
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 8080.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
curl http://localhost:8080
# –û—Ç–≤–µ—Ç: Taskflow API is running!

curl http://localhost:8080/health
# –û—Ç–≤–µ—Ç: JSON —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Å–µ—Ä–≤–∏—Å–∞
```

## üìö API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ë–∞–∑–æ–≤—ã–π URL
```
http://localhost:8080
```

### –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å –∫–æ–¥—ã |
|-------|------|----------|-------------|
| `GET` | `/` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã API | 200 |
| `GET` | `/health` | Health check —Å–µ—Ä–≤–∏—Å–∞ | 200, 503 |
| `POST` | `/tasks` | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ | 201, 400, 409, 500 |
| `GET` | `/tasks/{id}` | –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á–∏ | 200, 400, 404, 500 |
| `DELETE` | `/tasks/{id}` | –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ | 204, 400, 404, 409, 500 |

### –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

**Task Object:**
```json
{
  "id": "my-task-1",
  "status": "pending",
  "created_at": "2025-07-02T19:30:00Z",
  "started_at": "2025-07-02T19:30:05Z",
  "completed_at": "2025-07-02T19:35:15Z", 
  "result": "Task completed by worker 2",
  "error": ""
}
```

**–°—Ç–∞—Ç—É—Å—ã –∑–∞–¥–∞—á:**
- `pending` - –∑–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–Ω–∞, –æ–∂–∏–¥–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- `running` - –∑–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤–æ—Ä–∫–µ—Ä–æ–º
- `completed` - –∑–∞–¥–∞—á–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ
- `failed` - –∑–∞–¥–∞—á–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —Å –æ—à–∏–±–∫–æ–π

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl -X POST http://localhost:8080/tasks \
  -H "Content-Type: application/json" \
  -d '{"id": "data-processing-job"}'
```

**–û—Ç–≤–µ—Ç (201 Created):**
```json
{
  "id": "data-processing-job",
  "status": "pending",
  "created_at": "2025-07-02T19:30:00Z"
}
```

#### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á–∏

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl http://localhost:8080/tasks/data-processing-job
```

**–û—Ç–≤–µ—Ç (200 OK) - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è:**
```json
{
  "id": "data-processing-job", 
  "status": "running",
  "created_at": "2025-07-02T19:30:00Z",
  "started_at": "2025-07-02T19:30:05Z"
}
```

**–û—Ç–≤–µ—Ç (200 OK) - –ó–∞–≤–µ—Ä—à–µ–Ω–∞:**
```json
{
  "id": "data-processing-job",
  "status": "completed", 
  "created_at": "2025-07-02T19:30:00Z",
  "started_at": "2025-07-02T19:30:05Z",
  "completed_at": "2025-07-02T19:35:15Z",
  "result": "Task completed by worker 2"
}
```

#### 3. –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl -X DELETE http://localhost:8080/tasks/data-processing-job
```

**–û—Ç–≤–µ—Ç (204 No Content):** *(–ø—É—Å—Ç–æ–µ —Ç–µ–ª–æ –æ—Ç–≤–µ—Ç–∞)*

#### 4. Health Check

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl http://localhost:8080/health
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "status": "healthy",
  "timestamp": "2025-07-02T19:45:00Z", 
  "uptime": "15m30s",
  "service": "Taskflow API",
  "version": "1.0.0",
  "metrics": {
    "active_workers": 3,
    "total_tasks": 5,
    "pending_tasks": 1,
    "running_tasks": 2, 
    "completed_tasks": 2,
    "failed_tasks": 0
  },
  "checks": {
    "workers": "ok",
    "memory": "ok", 
    "storage": "ok"
  }
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–í—Å–µ –æ—à–∏–±–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ:

```json
{
  "error": "Task ID is required"
}
```

**–ö–æ–¥—ã –æ—à–∏–±–æ–∫:**
- `400 Bad Request` - –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞
- `404 Not Found` - –∑–∞–¥–∞—á–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
- `409 Conflict` - –∑–∞–¥–∞—á–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
- `500 Internal Server Error` - –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- `503 Service Unavailable` - —Å–µ—Ä–≤–∏—Å –Ω–µ—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–µ–Ω

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **HTTP Server** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ REST API —Å CORS –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
- **Task Manager** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∑–∞–¥–∞—á
- **Worker Pool** - –ø—É–ª –≥–æ—Ä—É—Ç–∏–Ω –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **In-Memory Repository** - thread-safe —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∑–∞–¥–∞—á
- **Health Check** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
taskflow/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ main.go              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ handler/             # HTTP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handler.go       # API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handler_test.go  # –¢–µ—Å—Ç—ã API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ health.go        # Health check
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ health_test.go   # –¢–µ—Å—Ç—ã health check
‚îÇ   ‚îú‚îÄ‚îÄ model/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ task.go          # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ repository/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ memory.go        # In-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ memory_test.go   # –¢–µ—Å—Ç—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ service/
‚îÇ       ‚îú‚îÄ‚îÄ manager.go       # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ       ‚îî‚îÄ‚îÄ manager_test.go  # –¢–µ—Å—Ç—ã –º–µ–Ω–µ–¥–∂–µ—Ä–∞
‚îú‚îÄ‚îÄ go.mod                   # Go –º–æ–¥—É–ª—å
‚îú‚îÄ‚îÄ go.sum                   # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env.example             # –ü—Ä–∏–º–µ—Ä .env —Ñ–∞–π–ª–∞
‚îú‚îÄ‚îÄ Dockerfile               # Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml       # Docker Compose —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ README.md                # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç —Ç–µ—Å—Ç—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º testify:

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
go test ./...

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞
go test ./internal/handler/

# –ó–∞–ø—É—Å–∫ —Å verbose –≤—ã–≤–æ–¥–æ–º
go test -v ./...
```

**–¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤:**
- Unit —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- HTTP —Ç–µ—Å—Ç—ã –¥–ª—è API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤  
- Concurrency —Ç–µ—Å—Ç—ã –¥–ª—è thread safety
- Integration —Ç–µ—Å—Ç—ã –¥–ª—è health check

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ JSON –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

```json
{"level":"info","msg":"Creating task","task_id":"my-task","time":"2025-07-02T19:30:00Z"}
{"level":"info","msg":"Task completed successfully","task_id":"my-task","worker_id":2,"duration":"4m15s","time":"2025-07-02T19:34:15Z"}
```

### –ú–µ—Ç—Ä–∏–∫–∏ —á–µ—Ä–µ–∑ Health Check

- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–æ—Ä–∫–µ—Ä–æ–≤
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
- Uptime —Å–µ—Ä–≤–∏—Å–∞
- –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

## üöÄ Production

### Docker

```dockerfile
FROM golang:1.24-alpine AS builder
WORKDIR /app
COPY . .
RUN go mod tidy && go build -o taskflow cmd/main.go

FROM alpine:latest
RUN apk --no-cache add ca-certificates
WORKDIR /root/
COPY --from=builder /app/taskflow .
CMD ["./taskflow"]
```

### Environment Variables

```bash
PORT=8080          # –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 8080)
WORKERS=3          # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3) 
LOG_LEVEL=info     # –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```

### Load Balancer Health Check

```yaml
health_check:
  path: /health
  interval: 30s
  timeout: 5s
  healthy_threshold: 2
  unhealthy_threshold: 3
```

## üìù Changelog

### v1.0.0
- –ë–∞–∑–æ–≤—ã–π REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ worker pool
- In-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å thread safety
- Health check —ç–Ω–¥–ø–æ–∏–Ω—Ç —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- Graceful shutdown
- Comprehensive test suite

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

(MIT LICENSE)[https://github.com/bambutcha/taskflow/blob/master/LICENSE]

## ü§ù Contributing

1. Fork –ø—Ä–æ–µ–∫—Ç
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch (`git checkout -b feature/amazing-feature`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
4. Push –≤ branch (`git push origin feature/amazing-feature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request
